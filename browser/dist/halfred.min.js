!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.halfred=a():"undefined"!=typeof global?global.halfred=a():"undefined"!=typeof self&&(self.halfred=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./lib/parser"),d=!1;b.exports={parse:function(a){return(new c).parse(a,d)},enableValidation:function(a){d=null!=a?a:!0},disableValidation:function(){d=!1}}},{"./lib/parser":3}],2:[function(a,b){"use strict";function c(){this._array=arguments.length>=1?arguments[0]:[]}c.prototype.array=function(){return this._array},c.prototype.isEmpty=function(){return 0===this._array.length},c.prototype.push=function(a){var b=this._array.slice(0);return b.push(a),new c(b)},c.prototype.pop=function(){var a=this._array.slice(0,this._array.length-1);return new c(a)},c.prototype.peek=function(){if(this.isEmpty())throw new Error("can't peek on empty stack");return this._array[this._array.length-1]},b.exports=c},{}],3:[function(a,b){"use strict";function c(){}function d(a,b,c){if(null==a)return a;var d=e(a._links,b,c.push("_links")),g=f(a._embedded,b,c.push("_embedded"));return new o(a,d,g,b)}function e(a,b,c){return a=g(a,i,b,c),(null==a||null==a.self)&&l("Resource does not have a self link",b,c),a}function f(a,b,c){return a=g(a,k,b,c),null==a?a:(Object.keys(a).forEach(function(e){a[e]=a[e].map(function(a){var f=null!=b?[]:null;return d(a,f,c.push(e))})}),a)}function g(a,b,c,d){return null==a?a:(Object.keys(a).forEach(function(e){a[e]=h(e,a[e],b,c,d)}),a)}function h(a,b,c,d,e){return j(b)?b.map(function(b){return c(a,b,d,e)}):[c(a,b,d,e)]}function i(a,b,c,d){return Object.keys(q).forEach(function(e){null==b[e]&&(q[e].required&&l("Link misses required property "+e+".",c,d.push(a)),null!=q[e].defaultValue&&(b[e]=q[e].defaultValue))}),b.deprecation&&m("Warning: Link "+n(d.push(a))+" is deprecated, see "+b.deprecation),b.templated!==!0&&b.templated!==!1&&(b.templated=!1),c?(b.href&&b.href.indexOf("{")>=0&&!b.templated&&l('Link seems to be an URI template but its "templated" property is not set to true.',c,d.push(a)),b):b}function j(a){return"[object Array]"===Object.prototype.toString.call(a)}function k(a,b){return b}function l(a,b,c){b&&b.push({path:n(c),message:a})}function m(a){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(a)}function n(a){for(var b="$.",c=0;c<a.array().length;c++)b+=a.array()[c]+".";return b=b.substring(0,b.length-1)}var o=a("./resource"),p=a("./immutable_stack"),q={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};c.prototype.parse=function(a,b){var c=b?[]:null;return d(a,c,new p)},b.exports=c},{"./immutable_stack":2,"./resource":4}],4:[function(a,b){"use strict";function c(a,b,c,d){var e=this;this._links=b||{},this._embedded=c||{},this._validation=d||[],Object.keys(a).forEach(function(b){"_links"!==b&&"_embedded"!==b&&(e[b]=a[b])})}function d(a,b){return null!=a?a[b]:null}function e(a,b){var c=d(a,b);return null!=c&&c.length>=1?c[0]:null}c.prototype.allLinkArrays=function(){return this._links},c.prototype.linkArray=function(a){return d(this._links,a)},c.prototype.link=function(a){return e(this._links,a)},c.prototype.allEmbeddedResourceArrays=function(){return this._embedded},c.prototype.embeddedResourceArray=function(a){return d(this._embedded,a)},c.prototype.embeddedResource=function(a){return e(this._embedded,a)},c.prototype.validationIssues=function(){return this._validation},c.prototype.allLinks=c.prototype.allLinkArrays,c.prototype.allEmbeddedArrays=c.prototype.allEmbeddedResources=c.prototype.allEmbeddedResourceArrays,c.prototype.embeddedArray=c.prototype.embeddedResourceArray,c.prototype.embedded=c.prototype.embeddedResource,c.prototype.validation=c.prototype.validationIssues,b.exports=c},{}]},{},[1])(1)});